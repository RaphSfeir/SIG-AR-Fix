<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta content="text/html; charset=CP850" http-equiv="Content-Type" />

  <title>File: named_timezones.rb [sequel-3.41.0 Documentation]</title>

  <link type="text/css" media="screen" href="../../../rdoc.css" rel="stylesheet" />

  <script src="../../../js/jquery.js" type="text/javascript"
    charset="utf-8"></script>
  <script src="../../../js/thickbox-compressed.js" type="text/javascript"
    charset="utf-8"></script>
  <script src="../../../js/quicksearch.js" type="text/javascript"
    charset="utf-8"></script>
  <script src="../../../js/darkfish.js" type="text/javascript"
    charset="utf-8"></script>
</head>

<body class="file file-popup">
  <div id="metadata">
    <dl>
      <dt class="modified-date">Last Modified</dt>
      <dd class="modified-date">2012-11-14 23:59:15 +0100</dd>

      
      <dt class="requires">Requires</dt>
      <dd class="requires">
        <ul>
        
          <li>tzinfo</li>
        
        </ul>
      </dd>
      

      
    </dl>
  </div>

  <div id="documentation">
    
    <div class="description">
      <h2>Description</h2>
      
<p>Allows the use of named timezones via TZInfo (requires tzinfo). Forces the
use of DateTime as Sequel's datetime_class, since ruby's Time class doesn't
support timezones other than local and UTC.</p>

<p>This allows you to either pass strings or TZInfo::Timezone instance to
Sequel.database_timezone=, application_timezone=, and typecast_timezone=. 
If a string is passed, it is converted to a TZInfo::Timezone using
TZInfo::Timezone.get.</p>

<p>To load the extension:</p>

<pre>Sequel.extension :named_timezones</pre>

<p>Let's say you have the database server in New York and the application
server in Los Angeles.  For historical reasons, data is stored in local New
York time, but the application server only services clients in Los Angeles,
so you want to use New York time in the database and Los Angeles time in
the application.  This is easily done via:</p>

<pre>Sequel.database_timezone = 'America/New_York'
Sequel.application_timezone = 'America/Los_Angeles'</pre>

<p>Then, before data is stored in the database, it is converted to New York
time.  When data is retrieved from the database, it is converted to Los
Angeles time.</p>

<p>Note that typecasting from the database timezone to the application
timezone when fetching rows is dependent on the database adapter, and only
works on adapters where <a href="../../../Sequel.html">Sequel</a> itself
does the conversion. It should work on mysql, postgres, sqlite, ibmdb, and
jdbc.</p>

    </div>
    
  </div>
</body>
</html>

