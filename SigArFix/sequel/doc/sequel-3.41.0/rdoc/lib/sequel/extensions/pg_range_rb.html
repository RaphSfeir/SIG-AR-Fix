<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta content="text/html; charset=CP850" http-equiv="Content-Type" />

  <title>File: pg_range.rb [sequel-3.41.0 Documentation]</title>

  <link type="text/css" media="screen" href="../../../rdoc.css" rel="stylesheet" />

  <script src="../../../js/jquery.js" type="text/javascript"
    charset="utf-8"></script>
  <script src="../../../js/thickbox-compressed.js" type="text/javascript"
    charset="utf-8"></script>
  <script src="../../../js/quicksearch.js" type="text/javascript"
    charset="utf-8"></script>
  <script src="../../../js/darkfish.js" type="text/javascript"
    charset="utf-8"></script>
</head>

<body class="file file-popup">
  <div id="metadata">
    <dl>
      <dt class="modified-date">Last Modified</dt>
      <dd class="modified-date">2012-11-14 23:59:15 +0100</dd>

      
      <dt class="requires">Requires</dt>
      <dd class="requires">
        <ul>
        
          <li>adapters/utils/pg_types</li>
        
        </ul>
      </dd>
      

      
    </dl>
  </div>

  <div id="documentation">
    
    <div class="description">
      <h2>Description</h2>
      
<p>The pg_range extension adds support for the PostgreSQL 9.2+ range types to
<a href="../../../Sequel.html">Sequel</a>.  PostgreSQL range types are
similar to ruby's <a href="../../../Range.html">Range</a> class,
representating an array of values.  However, they are more flexible than
ruby's ranges, allowing exclusive beginnings and endings (ruby's range only
allows exclusive endings), and unbounded beginnings and endings (which
ruby's range does not support).</p>

<p>This extension integrates with Sequel's native postgres adapter, so that
when range type values are retrieved, they are parsed and returned as
instances of <a
href="../../../Sequel/Postgres/PGRange.html">Sequel::Postgres::PGRange</a>.
PGRange mostly acts like a <a href="../../../Range.html">Range</a>, but
it's not a <a href="../../../Range.html">Range</a> as not all PostgreSQL
range type values would be valid ruby ranges.  If the range type value you
are using is a valid ruby range, you can call PGRange#to_range to get a <a
href="../../../Range.html">Range</a>.  However, if you call
PGRange#to_range on a range type value uses features that ruby's <a
href="../../../Range.html">Range</a> does not support, an exception will be
raised.</p>

<p>In addition to the parser, this extension comes with literalizers for both
PGRange and <a href="../../../Range.html">Range</a> that use the standard
<a href="../../../Sequel.html">Sequel</a> literalization callbacks, so they
work on all adapters.</p>

<p>To turn an existing <a href="../../../Range.html">Range</a> into a PGRange,
use Sequel.pg_range:</p>

<pre>Sequel.pg_range(range)</pre>

<p>If you have loaded the <a
href="../../../files/doc/core_extensions_rdoc.html">core_extensions
extension</a>), you can also use <a
href="../../../Range.html#method-i-pg_range">Range#pg_range</a>:</p>

<pre>range.pg_range</pre>

<p>You may want to specify a specific range type:</p>

<pre>Sequel.pg_range(range, :daterange)
range.pg_range(:daterange)</pre>

<p>If you specify the range database type, <a
href="../../../Sequel.html">Sequel</a> will automatically cast the value to
that type when literalizing.</p>

<p>If you would like to use range columns in your model objects, you probably
want to modify the schema parsing/typecasting so that it recognizes and
correctly handles the range type columns, which you can do by:</p>

<pre>DB.extension :pg_range</pre>

<p>If you are not using the native postgres adapter, you probably also want to
use the typecast_on_load plugin in the model, and set it to typecast the
range type column(s) on load.</p>

<p>This extension integrates with the pg_array extension.  If you plan to use
arrays of range types, load the pg_array extension before the pg_range
extension:</p>

<pre>DB.extension :pg_array, :pg_range</pre>

    </div>
    
  </div>
</body>
</html>

