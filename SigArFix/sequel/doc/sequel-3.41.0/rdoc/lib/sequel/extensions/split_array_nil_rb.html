<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta content="text/html; charset=CP850" http-equiv="Content-Type" />

  <title>File: split_array_nil.rb [sequel-3.41.0 Documentation]</title>

  <link type="text/css" media="screen" href="../../../rdoc.css" rel="stylesheet" />

  <script src="../../../js/jquery.js" type="text/javascript"
    charset="utf-8"></script>
  <script src="../../../js/thickbox-compressed.js" type="text/javascript"
    charset="utf-8"></script>
  <script src="../../../js/quicksearch.js" type="text/javascript"
    charset="utf-8"></script>
  <script src="../../../js/darkfish.js" type="text/javascript"
    charset="utf-8"></script>
</head>

<body class="file file-popup">
  <div id="metadata">
    <dl>
      <dt class="modified-date">Last Modified</dt>
      <dd class="modified-date">2012-11-14 23:59:15 +0100</dd>

      
      <dt class="requires">Requires</dt>
      <dd class="requires">
        <ul>
        
        </ul>
      </dd>
      

      
    </dl>
  </div>

  <div id="documentation">
    
    <div class="description">
      <h2>Description</h2>
      
<p>The split_array_nil extension overrides Sequel's default handling of IN/NOT
IN with arrays of values to do specific nil checking.  For example,</p>

<pre>ds = DB[:table].where(:column=&gt;[1, nil])</pre>

<p>By default, that produces the following SQL:</p>

<pre>SELECT * FROM table WHERE (column IN (1, NULL))</pre>

<p>However, because NULL = NULL is not true in SQL (it is NULL), this will not
return rows in the table where the column is NULL.  This extension allows
for an alternative behavior more similar to ruby, which will return rows in
the table where the column is NULL, using a query like:</p>

<pre>SELECT * FROM table WHERE ((column IN (1)) OR (column IS NULL)))</pre>

<p>Similarly, for NOT IN queries:</p>

<pre>ds = DB[:table].exclude(:column=&gt;[1, nil])
# Default:
#   SELECT * FROM table WHERE (column NOT IN (1, NULL))
# with split_array_nils extension:
#   SELECT * FROM table WHERE ((column NOT IN (1)) AND (column IS NOT NULL)))</pre>

<p>To use this extension with a single dataset:</p>

<pre>ds = ds.extension(:split_array_nil)</pre>

<p>To use this extension for all of a database's datasets:</p>

<pre>DB.extension(:split_array_nil)</pre>

    </div>
    
  </div>
</body>
</html>

